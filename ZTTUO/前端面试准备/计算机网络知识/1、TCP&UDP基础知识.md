## TCP/IP 五层模型

![](https://images2015.cnblogs.com/blog/849589/201706/849589-20170628002845914-1085185628.png)

5、应用层
4、传输层
3、网络层
2、数据链路层
1、实体层/物理层

## TCP/IP 七层模型

![](https://img.springlearn.cn/blog/learn_1599113858000.png)

7、应用层
6、表示层
5、会话层
4、传输层
3、网络层
2、数据链路层
1、实体层/物理层

### 实体层/物理层 

指的是网线，用来传输0或者1

### 数据链路层

规定了0和1的分组方式(以太网协议)

拥有head 和 data 两部份内容

head中包含了发送方和接收方的mac地址，data中储存了传输的内容

mac地址绑定在网卡上

在同个局域网中，a设备使用网卡，以以太网通过广播的形式发送给局域网中的所有设备数据包 ，每个设备通过读取heder中的地址来判断是否为自己要接受的mac地址，如果不是的化就丢弃。这种方式称之为广播。

### 网络层

主机到主机的通信 ip对ip

### 传输层

端口到端口的通信 端口对端口

UDP协议： head + data

head中包含发送端口和接收端口

data中包含具体的内容

以太网数据包 包含> ip数据包 包含> UDP数据包

TCP协议：三次握手，四次挥手 

TCP VS UDP

面向连接 —— 无连接
提供可靠服务 —— 不保证可靠
点对点 —— 一对一，多对一，多对多（实时性强）
资源消耗高 —— 资源消耗少

### 应用层

head   +   head  + head +  data
以太网标头  IP标头  TCP标头  应用层数据包

[图解http学习笔记](https://segmentfault.com/u/landyliu)

[TCP面试题整理](https://juejin.cn/post/6844904070889603085#heading-19)

### HTTP2多路复用

http/1.x每次请求都会简历一次tcp链接，而且会有阻塞问题，只有前一个请求完成了才能到下一个。

http/2则是将相同域名下的请求通过同一个tcp链接完成发送。

而且浏览器对于同一时间发送的tcp链接是有限制的，chrome的数量为6个。

http/2中有帧和流的概念，每个帧会表示属于哪个流，多个帧组成了数据流，多路复用就是在一个tcp中存在多个流，通过帧可以知道属于哪个请求。通过这个技术解决了头部堵塞的问题

### 谈谈你对 TCP 三次握手和四次挥手的理解

> 三次握手

A                                B
|  我喜欢你，我们在一起吧            | 
|  --------------------------->  | 
|  我听到啦，我也喜欢你，我们在一起吧  | 
|  <---------------------------  | 
|  我也听到啦，太好啦，爱你宝        | 

        AB在一起了（建立连接）

> 四次挥手

A                                           B    
|   我不爱你了，我们分手吧                      | 
|  ------------------------------------->   |
|   你这个渣男，你必须给我一个解释               |
|  <-------------------------------------   |
|   算了，我想通，我们分手吧                    |
|  <-------------------------------------   |
|   好，咱们两个互删吧                         |
|  --------------------------->  B删除了A    |
|                                           |
|  2msl之后A等不到B回消息A删除了B               | 

          AB分手了 （断开连接）